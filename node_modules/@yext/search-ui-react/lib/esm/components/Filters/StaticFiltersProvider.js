import { jsx as _jsx } from "react/jsx-runtime";
import { useSearchActions, useSearchState } from '@yext/search-headless-react';
import { useMemo } from 'react';
import { executeSearch } from '../../utils/search-operations';
import { FiltersContext } from './FiltersContext';
/**
 * The StaticFilters component is a wrapper component around {@link Filters} that updates static filter
 * options when a child filter is updated.
 *
 * The representation of the facets is configured using props.children,
 * and is intended for use with components like {@link Filters.CheckboxOption}.
 *
 * @param props - {@link Filters.StaticFiltersProviderProps}
 *
 * @public
 */
export function StaticFiltersProvider({ children, className = 'w-full', searchOnChange = true }) {
    const searchActions = useSearchActions();
    const displayableFilters = useSearchState(state => state.filters.static);
    const filtersContextInstance = useMemo(() => {
        return {
            selectFilter(filter) {
                searchActions.setFilterOption(Object.assign({}, filter));
            },
            applyFilters() {
                if (searchOnChange) {
                    searchActions.setOffset(0);
                    searchActions.resetFacets();
                    executeSearch(searchActions);
                }
            },
            filters: displayableFilters !== null && displayableFilters !== void 0 ? displayableFilters : []
        };
    }, [searchActions, displayableFilters, searchOnChange]);
    return (_jsx("div", Object.assign({ className: className }, { children: _jsx(FiltersContext.Provider, Object.assign({ value: filtersContextInstance }, { children: children }), void 0) }), void 0));
}
//# sourceMappingURL=StaticFiltersProvider.js.map